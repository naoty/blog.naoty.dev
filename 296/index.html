<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vim も zsh も捨てた</title>
    <meta property="og:title" content="vim も zsh も捨てた">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://blog.naoty.dev/296/">
    <meta property="og:image" content="https://blog.naoty.dev/icon.png">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@naoty_k">
    <link href="/normalize.css" rel="stylesheet">
    <link href="/main.css" rel="stylesheet">
    <link href="/highlight.css" rel="stylesheet">
    <link href="/favicon.png" rel="shortcut icon" type="image/png">
    <link href="/feed.xml" rel="alternate" type="application/atom+xml">
  </head>
  <body>
    <main>
      <article>
        <header>
          <h1 class="title mt-0">vim も zsh も捨てた</h1>
          <p class="metadata">
            <time datetime="2017-04-18T22:46:00.000+0000">2017-04-18 22:46</time>
            <a href="/vim/">#vim</a>
          </p>
        </header>
        <section class="body">
          <p>プロジェクト移行期に入って暇な時間ができたので、開発環境をリフレッシュすることにした。vim や zsh の設定が少しずつ壊れてきていたのだった。</p>
<p>.vimrc や .zshrc を眺めてみると、かつて <del>意識が高かった頃に</del> 施した設定が何のためのものだったのか忘れてしまっていた。別人が書いたスパゲティコードのようだった。</p>
<p>また vim や zsh の設定を検索して理解するべきなんだろうか。ここで覚えた知識はまたすぐに忘れてしまうんじゃないだろうか。設定が洗練されるほどに、それを更新する機会もまた少なくなってくる。設定が必要になるきっかけは忘れた頃にやってくるもんだ。</p>
<p>やり方を根本的に見直す時期なのかもしれない。新しいツールもいまなら選択できる。</p>
<p>まず、vim から atom に移行した。git のコミットメッセージやちょっとしたファイルの修正ではまだ vim を使うものの、細かい設定が必要になる作業では vim を使うのをやめた。デフォルトでインストールされているプラグインのおかげで、開発環境に合ったプラグインをインストールだけで充分に使えるものになった。</p>
<p>プラガブルな作りになっているから、プラグインのインストール・アンインストールだけで設定が完結してしまう。もしプラグインが壊れたら、替わりをインストールすればいい。解決すべき問題は局所化されているから、なんとか自作することも可能だろう。</p>
<p>次に、zsh から fish に移行した。fish は設定しなくてもコマンドの補完などの設定がデフォルトでいい感じになっていて、ほとんど設定がいらなかった。しかも、設定ファイルも何種類もあるのではなくて、1つのファイルだけでいいようだ。</p>
<p>fish 自体にはプラガブルな機構がないので、<a href="https://github.com/fisherman/fisherman">fisherman</a> というツールを併用している。fisherman によってプラグインのインストール・アンインストール、依存関係の管理が可能になった。</p>
<p>自分でいくつかプラグインをつくった。</p>
<ul>
<li>
<a href="https://github.com/naoty/fish-my_prompt">naoty/fish-my_prompt</a> : 自分好みのプロンプトが見当たらなかったので自作した。</li>
<li>
<a href="https://github.com/naoty/fish-my_key_bindings">naoty/fish-my_key_bindings</a> : キーバインディングも関数として定義できるためプラグイン化した。これによって、インストール・アンインストールだけで設定を変更できる。</li>
<li>
<a href="https://github.com/naoty/fish-my_peco_functions">naoty/fish-my_peco_functions</a> : 以前から peco を使っていたため、peco と組み合わせて使う関数群をプラグイン化した。</li>
</ul>
<p>結局、設定ファイルがプラグインという形に変わっただけではとも思ったが、一度壊れたプラグインはおそらくもう修正することはないだろう。アンインストールして、新たに必要なプラグインを見繕うことになる。ダメになったら捨てればいい、みたいな気軽さがある。</p>
<hr>
<h2>追記（2017-04-20）</h2>
<p>思っていた以上に反響があって驚いた。修正点と反響へのコメントを載せます。</p>
<ul>
<li>「意識が高かった頃に施した」という表現を撤回しました。意識が高いとか低いとか不毛な話を避けたかったので。</li>
<li>vim と zsh だけじゃなく tmux も捨てました。サーバー内で作業するなら必要かもしれないけど、普段の開発では主にウィンドウ分割の用途としてのみ使っており、iTerm 2 の機能だけで十分ではということに気づきました。</li>
<li>デフォルトのままが良いという話について。僕は普段は iOS アプリの開発が主な仕事なので、シェルスクリプトに触れる機会はあんまりありません。サーバーにログインして何か作業するような仕事がメインであれば、bash をデフォルト設定で使ったり、ちゃんとシェルスクリプトを理解することは必要だと思います。あくまでここに書いたのは僕の場合なので、そこを考慮してくれると誤解がないかなと思います。</li>
<li>Git で設定ファイル群、俗にいう dotfiles を管理すれば良いという話について。僕もかなり昔から <a href="https://github.com/naoty/dotfiles">dotfiles</a> を GitHub で公開しており、かつてはちゃんとメンテナンスしていました。やらなくなった理由としては、細かいチューニングの度にコミットするのがめんどくさくなったということがありますね。あとは、直接設定ファイルを修正することが減ってきているというのもあります。atom の設定画面でポチポチ設定を修正すると、それをコミットするのを忘れてしまうのです。こうして大きい差分が生まれてしまい、メンテナンスをする意欲が失われていきました。</li>
</ul>
        </section>
        <footer>
          <nav>
            <ul class="footer-links mb-0">
              <li class="footer-link"><a href="https://naoty.dev">Home</a></li>
              <li class="footer-link"><a href="/">Posts</a></li>
            </ul>
          </nav>
        </footer>
      </article>
    </main>
  </body>
</html>
