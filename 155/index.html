<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ruby-2.0.0-preview1をインストールしてみた</title>
    <link href="/normalize.css" rel="stylesheet">
    <link href="/main.css" rel="stylesheet">
    <link href="/favicon.png" rel="shortcut icon" type="image/png">
    <meta property="og:title" content="ruby-2.0.0-preview1をインストールしてみた">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://blog.naoty.dev/155/">
    <meta property="og:image" content="https://blog.naoty.dev/icon.png">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@naoty_k">
    <link href="/feed.xml" rel="alternate" type="application/atom+xml">
  </head>
  <body>
    <main>
      <article>
        <header>
          <h1 class="title mt-0">ruby-2.0.0-preview1をインストールしてみた</h1>
          <p class="metadata">
            <time datetime="2012-11-09T00:05:00.000+0000">2012-11-09 00:05</time>
            <a href="/ruby/">#ruby</a>
          </p>
        </header>
        <section class="body">
          <h2>環境</h2>
<ul>
<li>Mountain Lion</li>
<li>rvm</li>
<li>Homebrew</li>
</ul>
<h2>作業メモ</h2>
<pre lang="sh"><code>$ rvm get stable
</code></pre>
<ul>
<li>RVMをアップデートしておく。</li>
</ul>
<pre lang="sh"><code>$ rvm install ruby-2.0.0-preview1
No binary rubies available for: osx/10.8/x86_64/ruby-2.0.0-preview1.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Building 'ruby-2.0.0-preview1' using clang - but it's not (fully) supported, expect errors.
Installing Ruby from source to: /Users/naoty/.rvm/rubies/ruby-2.0.0-preview1, this may take a while depending on your cpu(s)...
ruby-2.0.0-preview1 - #downloading ruby-2.0.0-preview1, this may take a while depending on your connection...
ruby-2.0.0-preview1 - #extracting ruby-2.0.0-preview1 to /Users/naoty/.rvm/src/ruby-2.0.0-preview1
ruby-2.0.0-preview1 - #extracted to /Users/naoty/.rvm/src/ruby-2.0.0-preview1
ruby-2.0.0-preview1 - #configuring
ruby-2.0.0-preview1 - #compiling
ruby-2.0.0-preview1 - #installing 
Removing old Rubygems files...
Installing rubygems-1.8.24 for ruby-2.0.0-preview1 ...
Error running 'env GEM_PATH=/Users/naoty/.rvm/gems/ruby-2.0.0-preview1:/Users/naoty/.rvm/gems/ruby-2.0.0-preview1@global:/Users/naoty/.rvm/gems/ruby-2.0.0-preview1:/Users/naoty/.rvm/gems/ruby-2.0.0-preview1@global GEM_HOME=/Users/naoty/.rvm/gems/ruby-2.0.0-preview1 /Users/naoty/.rvm/rubies/ruby-2.0.0-preview1/bin/ruby /Users/naoty/.rvm/src/rubygems-1.8.24/setup.rb', please read /Users/naoty/.rvm/log/ruby-2.0.0-preview1/rubygems.install.log
Installation of rubygems did not complete successfully.
Ruby 'ruby-2.0.0-preview1' was built using clang - but it's not (fully) supported, expect errors.
</code></pre>
<ul>
<li><code>ruby-2.0.0-preview1</code>とちゃんと入れないとダメだった。</li>
<li>なんかエラーが出たので、<code>~/.rvm/log/ruby-2.0.0=preview1/rubygems.install.log</code>を読む。</li>
</ul>
<pre lang="sh"><code>$ less .rvm/log/ruby-2.0.0-preview1/rubygems.install.log
…
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby.
</code></pre>
<ul>
<li><code>libyaml</code>というものを入れる必要があるっぽい。</li>
<li>Homebrewで見つけたので入れる。</li>
</ul>
<pre lang="sh"><code>$ brew install libyaml
</code></pre>
<p>リトライ！</p>
<pre lang="sh"><code>$ rvm reinstall ruby-2.0.0-preview1
Removing /Users/naoty/.rvm/src/ruby-2.0.0-preview1...
Removing /Users/naoty/.rvm/rubies/ruby-2.0.0-preview1...
No binary rubies available for: osx/10.8/x86_64/ruby-2.0.0-preview1.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Building 'ruby-2.0.0-preview1' using clang - but it's not (fully) supported, expect errors.
Installing Ruby from source to: /Users/naoty/.rvm/rubies/ruby-2.0.0-preview1, this may take a while depending on your cpu(s)...
ruby-2.0.0-preview1 - #downloading ruby-2.0.0-preview1, this may take a while depending on your connection...
ruby-2.0.0-preview1 - #extracting ruby-2.0.0-preview1 to /Users/naoty/.rvm/src/ruby-2.0.0-preview1
ruby-2.0.0-preview1 - #extracted to /Users/naoty/.rvm/src/ruby-2.0.0-preview1
ruby-2.0.0-preview1 - #configuring
ruby-2.0.0-preview1 - #compiling
ruby-2.0.0-preview1 - #installing 
Removing old Rubygems files...
Installing rubygems-1.8.24 for ruby-2.0.0-preview1 ...
Installation of rubygems completed successfully.
Saving wrappers to '/Users/naoty/.rvm/bin'.
ruby-2.0.0-preview1 - #adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-2.0.0-preview1 - #importing default gemsets (/Users/naoty/.rvm/gemsets/)
Install of ruby-2.0.0-preview1 - #complete 
Ruby 'ruby-2.0.0-preview1' was built using clang - but it's not (fully) supported, expect errors.
Making gemset ruby-2.0.0-preview1 pristine.
Making gemset ruby-2.0.0-preview1@global pristine.
% rvm list
rvm rubies

=* ruby-1.9.3-p194 [ x86_64 ]
   ruby-2.0.0-preview1 [ x86_64 ]

# =&gt; - current
# =* - current &amp;&amp; default
#  * - default
</code></pre>
<ul>
<li>警告出てるけど、一応インストールできた〜</li>
<li>当面は<code>.rvmrc</code>を使って、特定のプロジェクトだけ2.0で開発してみようと思います。</li>
</ul>
        </section>
        <footer>
          <nav>
            <ul class="footer-links mb-0">
              <li><a href="/">Posts</a></li>
            </ul>
          </nav>
        </footer>
      </article>
    </main>
  </body>
</html>
